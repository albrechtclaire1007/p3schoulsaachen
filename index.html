<!DOCTYPE html>
<html lang="lb">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>P3 – Schoulsaachen</title>
<style>
  @font-face{
    font-family:'Schoulschrëft';
    src:url('https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
    font-weight:bold; font-display:swap;
  }

  :root{
    --blue-mid:#8ab6d9; --blue-light:#cfe4f6; --blue-dark:#4f7ca0;
    --ink:#1f1f1f; --white:#fff; --ok:#b7f0c8; --bad:#ffcccc;
  }

  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent; user-select:none; outline:none;}
  html,body{margin:0; height:100%; background:linear-gradient(135deg,var(--blue-mid),var(--blue-light)); color:var(--ink); font-family:'Schoulschrëft',Arial,sans-serif;}

  .top{
    position:sticky; top:8px; display:flex; gap:10px; align-items:center; justify-content:center;
    background:var(--white); border:3px solid var(--blue-dark); border-radius:18px;
    padding:.35rem .8rem; margin:10px auto; width:fit-content; box-shadow:0 6px 20px rgba(0,0,0,.1);
  }
  .iconBtn{
    border:3px solid var(--ink); background:var(--white); color:var(--ink);
    border-radius:14px; font-size:1.4rem; min-width:2.4rem; cursor:pointer;
  }
  .flow{font-size:1rem; min-width:8ch; text-align:center;}
  .hidden{display:none!important;}

  .wrap{min-height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
        gap:1.5vmin; padding:2vmin 3vmin 4vmin;}
  h1{text-align:center; font-size:clamp(2rem,6vmin,4rem); margin:.5rem 0;}

  .btn{
    border:3px solid var(--ink); background:var(--white); border-radius:14px;
    padding:.4rem .9rem; cursor:pointer; font-family:'Schoulschrëft',Arial,sans-serif;
  }

  .flash-good{background:var(--ok)!important; border-color:var(--ok)!important;}
  .flash-bad{background:var(--bad)!important; border-color:var(--bad)!important;}

  /* ---------- GAME 1 ---------- */
  .g1wrap{display:flex; flex-direction:column; align-items:center; width:95vw; max-width:1400px;}
  .wordGrid{
    display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:1vmin; justify-items:center; margin-bottom:2vmin;
  }
  .wordCard{
    background:#fff; border:5px solid var(--blue-mid); border-radius:18px;
    padding:.6rem 1rem; text-align:center; font-size:clamp(1.1rem,2.4vmin,1.6rem);
    cursor:pointer; box-shadow:0 5px 18px rgba(0,0,0,.08);
  }
  .wordCard.selected{outline:5px solid var(--blue-dark);}
  .imgGrid{
    display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
    gap:1.4vmin; justify-items:center;
  }
  .imgToken{
    background:#fff; border:6px solid var(--blue-mid); border-radius:22px;
    aspect-ratio:1/1; display:grid; place-items:center;
    cursor:pointer; transition:transform .1s; box-shadow:0 6px 18px rgba(0,0,0,.08);
  }
  .imgToken img{width:80%; height:80%; object-fit:contain;}
  .imgToken:active{transform:scale(.96);}
  .toggleBox{margin-top:1vmin;}

  /* ---------- GENERAL ELEMENTS ---------- */
  .bigBox{width:min(60vmin,85%); aspect-ratio:1/1; border:10px solid var(--blue-mid);
    border-radius:32px; display:grid; place-items:center; background:#fff; box-shadow:0 8px 24px rgba(0,0,0,.08);}
  .bigBox img{width:80%; height:80%; object-fit:contain;}
  .choices{display:flex; flex-wrap:wrap; justify-content:center; gap:.6rem;}
  .choice{background:#fff; border:4px solid var(--ink); border-radius:12px; padding:.35rem .7rem;
          cursor:pointer; font-size:clamp(1.6rem,4.6vmin,2rem); font-family:'Schoulschrëft',Arial,sans-serif;}
  .labelBig{text-align:center; font-size:clamp(2rem,5vmin,3rem); margin-bottom:1vmin;}

  .flash-good{background:var(--ok)!important;}
  .flash-bad{background:var(--bad)!important;}

</style>
</head>
<body>

<div class="top">
  <button class="iconBtn" id="prev">◀</button>
  <span class="flow" id="flowLabel">1. Spill</span>
  <button class="iconBtn" id="next">▶</button>
</div>

<!-- GAME 1 -->
<section class="wrap" id="g1">
  <h1>Lauschter a verbënn d'Wierder mat de Biller</h1>
  <div class="g1wrap">
    <div class="wordGrid" id="wordGrid"></div>
    <div class="imgGrid" id="imgGrid"></div>
  </div>
  <div class="toggleBox">
    <label><input type="checkbox" id="soundToggle" checked> Toun un/aus</label>
  </div>
</section>

<!-- GAME 2 -->
<section class="wrap hidden" id="g2">
  <h1>Schreif d’Wuert</h1>
  <div class="bigBox"><img id="spellImg" alt=""></div>
  <div class="choices" id="spellChoices"></div>
</section>

<!-- GAME 3 -->
<section class="wrap hidden" id="g3">
  <h1>Wiel den Artikel</h1>
  <div class="bigBox"><img id="artImg" alt=""></div>
  <div class="labelBig" id="artWord">_____ Numm</div>
  <div class="choices" id="artChoices"></div>
</section>

<!-- GAME 4 -->
<section class="wrap hidden" id="g4">
  <h1>De Pluriel vun de Schoulsaachen</h1>
  <div class="labelBig" id="pluWord">Wuert</div>
  <div class="choices" id="pluChoices"></div>
</section>

<!-- GAME 5 -->
<section class="wrap hidden" id="g5">
  <h1>Lies de Saz</h1>
  <div class="labelBig" id="sentDisplay"> </div>
  <button class="btn" id="sentCheck">Check</button>
</section>

<audio id="speaker" preload="auto"></audio>

<script>
/* ---------- DATA ---------- */
const AUDIO_BASE="https://github.com/albrechtclaire1007/p3schoulsaachen/raw/refs/heads/main/";
const AUDIO_FILES={
  "d'Buch":"BUCH.mp3","de Bläistëft":"Bläistëft.mp3","de Classeur":"Classeuren.mp3","de Gummi":"GUMMI.mp3","d'Heft":"HEFT.mp3",
  "d'Kräid":"KRÄID.mp3","d'Léierin":"léierin.mp3","de Lineal":"LINEAL.mp3","d'Blat Pabeier":"PABEIER.mp3",
  "d'Schachtel":"SCHACHTEL.mp3","d'Schéier":"SCHEIER.mp3","de Schoulsak":"Schoulsak.mp3","de Spëtzer":"spëtzer.mp3",
  "d'Tafel":"tafel.mp3","d'Tuschfaarf":"tuschfaarf.mp3","d'Bläistëftsfaarf":"blaischteftsfaarf.mp3"
};

const ITEMS=[
  {id:'blaisteft',label:"de Bläistëft",img:"https://i.postimg.cc/SnZrXnyQ/Bl-ist-ft.png"},
  {id:'blaisteftsf',label:"d'Bläistëftsfaarf",img:"https://i.postimg.cc/Bjhg8jqv/Bl-ist-ftsfaarwen.png"},
  {id:'buch',label:"d'Buch",img:"https://i.postimg.cc/HrS2Jrpx/Buch.png"},
  {id:'classeur',label:"de Classeur",img:"https://i.postimg.cc/CRvNZRF5/Classeur.png"},
  {id:'gummi',label:"de Gummi",img:"https://i.postimg.cc/VJ7RSJY5/Gummi.png"},
  {id:'heft',label:"d'Heft",img:"https://i.postimg.cc/SnZrXnyX/Heft.png"},
  {id:'kraid',label:"d'Kräid",img:"https://i.postimg.cc/qNmLtNkC/Kr-id.png"},
  {id:'leierin',label:"d'Léierin",img:"https://i.postimg.cc/YvX34vpW/L-ierin.png"},
  {id:'lineal',label:"de Lineal",img:"https://i.postimg.cc/tsr51sX6/Lineal.png"},
  {id:'blat',label:"d'Blat Pabeier",img:"https://i.postimg.cc/mPdwcPbM/Pabeier.png"},
  {id:'schachtel',label:"d'Schachtel",img:"https://i.postimg.cc/w1WVt16D/Schachtel.png"},
  {id:'scheier',label:"d'Schéier",img:"https://i.postimg.cc/mPdwcPbY/Sch-ier.png"},
  {id:'schoulsak',label:"de Schoulsak",img:"https://i.postimg.cc/bZ6TGZz0/Schoulsak.png"},
  {id:'spetzer',label:"de Spëtzer",img:"https://i.postimg.cc/pm0Z9m2B/Sp-tzer.png"},
  {id:'tafel',label:"d'Tafel",img:"https://i.postimg.cc/rDhJdD8J/Tafel.png"},
  {id:'tuschfaarf',label:"d'Tuschfaarf",img:"https://i.postimg.cc/bD9MmGtQ/15.png"}
];

/* PLURALS */
const LEXICON={
  classeur:{article:"de",noun:"Classeur",plural:"Classeuren"},
  schoulsak:{article:"de",noun:"Schoulsak",plural:"Schoulsäck"},
  scheier:{article:"d'",noun:"Schéier",plural:"Schéieren"},
  tafel:{article:"d'",noun:"Tafel",plural:"Tafelen"},
  leierin:{article:"d'",noun:"Léierin",plural:"Léierinnen"},
  schachtel:{article:"d'",noun:"Schachtel",plural:"Schachtelen"},
  tuschfaarf:{article:"d'",noun:"Tuschfaarf",plural:"Tuschfaarwen"},
  blaisteftsf:{article:"d'",noun:"Bläistëftsfaarf",plural:"Bläistëftsfaarwen"},
  blaisteft:{article:"de",noun:"Bläistëft",plural:"Bläistëfter"},
  lineal:{article:"de",noun:"Lineal",plural:"Linealen"},
  buch:{article:"d'",noun:"Buch",plural:"Bicher"}
};

/* ---------- HELPERS ---------- */
const speaker=document.getElementById('speaker');
async function playSound(src){try{if(speaker.src!==src)speaker.src=src;await speaker.play();}catch(e){}}
function playLabel(label){const f=AUDIO_FILES[label];if(f){playSound(AUDIO_BASE+encodeURIComponent(f));}}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function flash(el,ok){el.classList.remove('flash-good','flash-bad');void el.offsetWidth;el.classList.add(ok?'flash-good':'flash-bad');
setTimeout(()=>el.classList.remove('flash-good','flash-bad'),300);}

/* ---------- NAV ---------- */
const pages=["g1","g2","g3","g4","g5"];let pageIdx=0;
const flowLabel=document.getElementById('flowLabel'),prevBtn=document.getElementById('prev'),nextBtn=document.getElementById('next');
function updateNav(){flowLabel.textContent=`${pageIdx+1}. Spill`;prevBtn.classList.toggle('hidden',pageIdx===0);
nextBtn.classList.toggle('hidden',pageIdx===pages.length-1);}
function showPage(i){pageIdx=Math.max(0,Math.min(pages.length-1,i));
pages.forEach((id,idx)=>document.getElementById(id).classList.toggle('hidden',idx!==pageIdx));updateNav();}
prevBtn.onclick=()=>showPage(pageIdx-1);nextBtn.onclick=()=>showPage(pageIdx+1);

/* ---------- GAME 1 ---------- */
const wordGrid=document.getElementById('wordGrid'),imgGrid=document.getElementById('imgGrid');
const soundToggle=document.getElementById('soundToggle');
let selectedWord=null;
function buildG1(){
  wordGrid.innerHTML="";imgGrid.innerHTML="";selectedWord=null;
  const shuffled=shuffle([...ITEMS]);
  // words top 3 rows
  shuffled.forEach(it=>{
    const card=document.createElement('div');
    card.className='wordCard';card.textContent=it.label;
    card.onclick=()=>{
      if(soundToggle.checked)playLabel(it.label);
      if(selectedWord===card){card.classList.remove('selected');selectedWord=null;return;}
      if(selectedWord)selectedWord.classList.remove('selected');
      selectedWord=card;card.classList.add('selected');
    };
    wordGrid.appendChild(card);
  });
  // images below
  shuffle([...ITEMS]).forEach(it=>{
    const tile=document.createElement('div');
    tile.className='imgToken';tile.dataset.id=it.id;
    tile.innerHTML=`<img src="${it.img}" alt="${it.label}">`;
    tile.onclick=()=>{
      if(!selectedWord)return;
      const ok=selectedWord.textContent===it.label;
      flash(tile,ok);
      if(ok){
        selectedWord.style.opacity='.4';selectedWord.style.pointerEvents='none';
        tile.style.opacity='.8';tile.style.pointerEvents='none';
        selectedWord.classList.remove('selected');selectedWord=null;
        if([...wordGrid.children].every(w=>w.style.pointerEvents==='none'))
          setTimeout(()=>showPage(pageIdx+1),700);
      }else{selectedWord.classList.remove('selected');selectedWord=null;}
    };
    imgGrid.appendChild(tile);
  });
}

/* ---------- GAME 2–5 simple placeholders (reuse same data for flow) ---------- */
function setupG2(){document.getElementById('spellImg').src=ITEMS[0].img;}
function setupG3(){document.getElementById('artImg').src=ITEMS[1].img;}
function setupG4(){document.getElementById('pluWord').textContent=ITEMS[2].label;}
function setupG5(){document.getElementById('sentDisplay').textContent="3 Classeur sinn blo.";}
document.getElementById('sentCheck').onclick=()=>{document.getElementById('sentDisplay').textContent="Dräi Classeuren sinn blo.";};

/* ---------- INIT ---------- */
function init(){
  buildG1();setupG2();setupG3();setupG4();setupG5();showPage(0);
}
init();
</script>
</body>
</html>